# Metabaseを使ってみる

docker-composeで構築する。

```yml
version: '3.8'

services:
  metabase:
    image: metabase/metabase:latest
    ports:
      - 3000:3000
```

3000番ポートにアクセスするとアカウント登録画面が表示させる。（2回目も表示されたけど毎回入力しないようにするにはどうすればいいのだろう...）。

データベースの接続情報は、後で入力するを設定した。

## サンプルを真似して作ってみる

デフォルトで用意されているテーブルそれぞれのダッシュボードがある。`Products`テーブルのダッシュボードを真似して以下のようなものを作った。

![](https://i.gyazo.com/3b6f313599257afdf867f410892d23d9.png)

## とりあえずこれだけ抑えておけば大丈夫な概念

### 質問（クエリ）

- どのようなデータを取得して、どのように可視化するかを設定したもの
- `簡単な質問`、`カスタム質問`、`ネイティブクエリ`の3種類がある。
  - `簡単な質問`から`カスタム質問`の設定を開くボタンがあるので、基本的には`簡単な質問`を使えば良い。

| 種類               | 説明                                                          |
| ------------------ | ------------------------------------------------------------- |
| `簡単な質問`       | ボタンを押して質問を作成する                                  |
| `カスタム質問`     | `簡単な質問`で設定できない項目（ソート、limit）の設定ができる |
| `ネイティブクエリ` | SQLを書いて質問を作成する                                     |

### ダッシュボード

- 質問を表示する場所
- 配置、大きさ、色などが調整できる
- テキストボックスを置くこともできる（上の画像の見出しはこれで作っている）
  - テキストボックスはMarkdownで書ける


## これからやること

- デプロイする
- 表示するデータをAPIから取得する
- バッチを書いて定期的にデータを取得できるようにする
